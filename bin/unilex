#!/usr/bin/env php
<?php

use Remorhaz\UniLex\Console\GenerateTokenMatcherCommand;
use Symfony\Component\Console\Application;

$isComposerLoaded = false;
foreach (['../../..', '..', '../vendor'] as $composerAutoloadPath) {
    $composerAutoloadFile = __DIR__ . "/{$composerAutoloadPath}/autoload.php";
    if (is_file($composerAutoloadFile) === true) {
        /** @noinspection PhpIncludeInspection */
        require_once $composerAutoloadFile;
        $isComposerLoaded = true;
        break;
    }
}
if (!$isComposerLoaded) {
    fwrite(STDERR, "Composer autoload file not found!\n");
    exit(1);
}

$app = new Application();
$app->setCatchExceptions(true);
$app->setAutoExit(true);
$app->add(new GenerateTokenMatcherCommand());
/** @noinspection PhpUnhandledExceptionInspection */
$app->run();
